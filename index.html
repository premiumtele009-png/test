<!DOCTYPE html>
<html lang="km">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Smart Axiata V21.1</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="success-popup-overlay" id="successOverlay"></div>
<div class="success-popup" id="successPopup">
<div class="success-popup-icon"><i class="fas fa-check"></i></div>
<h3>ជោគជ័យ!</h3>
<p id="successMessage">ទិន្នន័យត្រូវបានរក្សាទុកដោយជោគជ័យ!</p>
<button class="success-popup-btn" onclick="closeSuccessPopup()">យល់ព្រម</button>
</div>
<div id="syncStatus" class="sync-status" style="display:none;"></div>
<script>
window.GOOGLE_APPS_SCRIPT_URL='https://script.google.com/macros/s/AKfycbyymhCml5TyRKDxjOPmUrHaliX_u0oLPXh5Q8RstRLQUQ1PgYLP66vz5_8WAbfHG3xb/exec';
window.SHEETS={USERS:'Users',SALES:'Sales',DEPOSITS:'Deposits',CUSTOMERS:'Customers',TOPUP:'TopUp',PROMOTIONS:'Promotions'};
</script>
<div class="login-overlay" id="loginOverlay">
<div class="login-container-new">
<div class="left-panel">
<div class="icon-circle"><svg viewBox="0 0 24 24"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/></svg></div>
<h1>ប្រព័ន្ធគ្រប់គ្រងការលក់</h1>
<p>ប្រព័ន្ធគ្រប់គ្រងការលក់ ទំនើប និង សុវត្ថិភាព</p>
<div class="features">
<div class="feature-item"><svg viewBox="0 0 24 24"><path d="M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.5 2.1h-15V5h15v14.1zm0-16.1h-15c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg><span>របាយការណ៍ស្ថិតិ</span></div>
<div class="feature-item"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg><span>គ្រប់គ្រងអ្នកប្រើប្រាស់</span></div>
<div class="feature-item"><svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg><span>សុវត្ថិភាពខ្ពស់</span></div>
</div>
</div>
<div class="right-panel">
<h2>ចូលប្រើប្រាស់</h2>
<p class="subtitle">សូមបញ្ចូលពត៌មានដើម្បីចូលប្រើប្រាស់គណនីរបស់អ្នក</p>
<div class="error-message" id="errorMessage"><i class="fas fa-exclamation-circle"></i><p>ឈ្មោះអ្នកប្រើប្រាស់ ឬ ពាក្យសម្ងាត់មិនត្រឹមត្រូវ!</p></div>
<div class="success-message" id="successMessageLogin"><i class="fas fa-check-circle"></i><p>ចូលប្រើប្រាស់ដោយជោគជ័យ!</p></div>
<form id="loginFormPopup">
<div class="form-group"><label>ឈ្មោះអ្នកប្រើប្រាស់</label>
<div class="input-wrapper"><input type="text" id="loginUsername" placeholder="បញ្ចូលឈ្មោះអ្នកប្រើប្រាស់" required>
<svg class="input-icon" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div></div>
<div class="form-group"><label>ពាក្យសម្ងាត់</label>
<div class="input-wrapper"><input type="password" id="loginPassword" placeholder="បញ្ចូលពាក្យសម្ងាត់" required>
<svg class="input-icon" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
<i class="fas fa-eye toggle-password" id="loginTogglePassword"></i></div></div>
<div class="remember-forgot"><label class="remember-label"><input type="checkbox" id="loginRememberMe"> ចងចាំខ្ញុំ</label>
<a href="https://t.me/saray2026123" target="_blank">ភ្លេចពាក្យសម្ងាត់?</a></div>
<button type="submit" class="btn-login" id="loginBtn"><span class="btn-text">ចូលប្រើប្រាស់</span><i class="fas fa-arrow-right btn-text"></i><div class="login-spinner"></div></button>
<div class="divider"><span>ឬ</span></div>
<div class="social-login">
<button type="button" class="social-btn" onclick="loginWithGoogle()"><span class="google-icon">G</span><span class="social-btn-text">Google</span></button>
<button type="button" class="social-btn" onclick="loginWithFacebook()"><span class="facebook-icon">f</span><span class="social-btn-text">Facebook</span></button>
</div>
<div class="signup-link">មិនទាន់មានគណនី? <a href="#" id="signupLink">ចុះឈ្មោះ</a></div>
</form>
</div>
</div>
<div id="signupModal" class="modal">
<div class="modal-content">
<div class="modal-header"><h3>ចុះឈ��មោះគណនីថ្មី</h3><span class="close" onclick="closeSignupModal()">&times;</span></div>
<div class="modal-body">
<div class="alert-message">⚠️ សូមកំណត់ឈ្មោះនិងលេខកូដសម្ងាត់របស់​អ្នក រួចរក្សាទុកអោយបានត្រឹមត្រូវ!</div>
<div class="example-box"><h4><span>📋</span> ឧទាហរណ៍៖</h4>
<div class="example-item"><span class="example-label">ឈ្មោះអ្នកប្រើប្រាស់:</span><span class="example-value">rim.saray</span></div>
<div class="example-item"><span class="example-label">ពាក្យសម្ងាត់:</span><span class="example-value">Saray@123</span></div>
</div>
<button class="btn-telegram" onclick="sendToTelegram()"><span class="telegram-icon">✈️</span>ផ្ញើសារទៅកាន់ Admin តាម Telegram</button>
</div>
</div>
</div>
</div>

<div class="system-content" id="systemContent">
<div class="sidebar">
<div class="sidebar-header">
<div class="sidebar-title"><i class="fas fa-signal sidebar-icon"></i><h1>Smart Axiata</h1></div>
<div class="user-info"><i class="fas fa-user-circle"></i><span id="loggedInUser">Admin</span><span class="user-role" id="userRole">Admin</span></div>
</div>
<ul class="sidebar-menu">
<li id="menu-dashboard" class="active"><a href="#" onclick="showPage('dashboard');return false;"><i class="fas fa-chart-pie"></i><span>Dashboard</span></a></li>
<li id="menu-daily-sales"><a href="#" onclick="showPage('daily-sales');return false;"><i class="fas fa-cash-register"></i><span>ការលក់ប្រចាំថ្ងៃ</span></a></li>
<li id="menu-deposit"><a href="#" onclick="showPage('deposit');return false;"><i class="fas fa-coins"></i><span>ការដាក់ប្រាក់</span></a></li>
<li id="menu-reports"><a href="#" onclick="showPage('reports');return false;"><i class="fas fa-chart-bar"></i><span>របាយការណ៍</span></a></li>
<li id="menu-customers"><a href="#" onclick="showPage('customers');return false;"><i class="fas fa-users"></i><span>អតិថិជន</span></a></li>
<li id="menu-promotions"><a href="#" onclick="showPage('promotions');return false;"><i class="fas fa-gift"></i><span>ប្រូម៉ូសិន</span></a></li>
<li id="menu-settings"><a href="#" onclick="showPage('settings');return false;"><i class="fas fa-cog"></i><span>ការកំណត់</span></a></li>
</ul>
<div class="sidebar-footer"><a href="#" class="logout-link" onclick="logout();return false;"><i class="fas fa-sign-out-alt"></i><span>ចាកចេញ</span></a></div>
</div>

<div class="main-content"><div class="container">
<div id="dashboard-page">
<div class="filter-card">
<div style="display:flex;align-items:center;gap:10px"><i class="fas fa-filter" style="color:#28a745;font-size:20px"></i><h3 style="font-size:16px;color:#333;font-weight:600;margin:0">តម្រងទិន្នន័យ</h3></div>
<div style="display:flex;gap:10px;flex-wrap:wrap">
<button class="filter-btn active" onclick="filterDashboard('today')" id="filter-today"><i class="fas fa-calendar-day"></i> ថ្ងៃនេះ</button>
<button class="filter-btn" onclick="filterDashboard('week')" id="filter-week"><i class="fas fa-calendar-week"></i> សប្តាហ៍នេះ</button>
<button class="filter-btn" onclick="filterDashboard('month')" id="filter-month"><i class="fas fa-calendar-alt"></i> ខែនេះ</button>
<button class="filter-btn" onclick="filterDashboard('year')" id="filter-year"><i class="fas fa-calendar"></i> ឆ្នាំនេះ</button>
<button class="filter-btn" onclick="filterDashboard('all')" id="filter-all"><i class="fas fa-globe"></i> ទាំងអស់</button>
</div>
</div>
<div class="dashboard-cards">
<div class="stat-card revenue"><div class="stat-card-header"><div><div class="stat-card-title">Total Revenue</div><div class="stat-card-value" id="totalRevenue">$0.00</div></div><div class="stat-card-icon"><i class="fas fa-dollar-sign"></i></div></div><div class="stat-card-footer"><i class="fas fa-arrow-up"></i><span>ចំណូលសរុបទាំងអស់</span></div></div>
<div class="stat-card recharge"><div class="stat-card-header"><div><div class="stat-card-title">Total Recharge</div><div class="stat-card-value" id="totalRecharge">$0.00</div></div><div class="stat-card-icon"><i class="fas fa-money-bill-wave"></i></div></div><div class="stat-card-footer"><i class="fas fa-arrow-up"></i><span>Recharge សរុប</span></div></div>
<div class="stat-card ads"><div class="stat-card-header"><div><div class="stat-card-title">Total Gross Ads</div><div class="stat-card-value" id="totalGrossAds">0</div></div><div class="stat-card-icon"><i class="fas fa-mobile-alt"></i></div></div><div class="stat-card-footer"><i class="fas fa-arrow-up"></i><span>Gross Ads សរុប</span></div></div>
<div class="stat-card transactions"><div class="stat-card-header"><div><div class="stat-card-title">Transactions</div><div class="stat-card-value" id="totalTransactions">0</div></div><div class="stat-card-icon"><i class="fas fa-receipt"></i></div></div><div class="stat-card-footer"><i class="fas fa-arrow-up"></i><span>ប្រតិបត្តិការសរុប</span></div></div>
</div>
<div class="dashboard-charts">
<div class="chart-card"><div class="chart-card-header"><div class="chart-card-title"><i class="fas fa-chart-bar"></i><h3 id="chartTitle">Revenue by Staff</h3></div></div><div class="chart-container-dashboard"><canvas id="dashboardChart1"></canvas></div></div>
<div class="chart-card"><div class="chart-card-header"><div class="chart-card-title"><i class="fas fa-chart-pie"></i><h3>Revenue Breakdown by Branch</h3></div></div><div class="chart-container-dashboard"><canvas id="dashboardChart2"></canvas></div><div id="branchLegend" style="margin-top:15px;max-height:150px;overflow-y:auto"></div></div>
</div>
<div class="leaderboard-table"><div class="chart-card-header"><div class="chart-card-title"><i class="fas fa-trophy"></i><h3 id="leaderboardTitle">Top Performance</h3></div></div>
<div class="data-table"><table><thead><tr><th>Rank</th><th id="leaderboardEntityHeader">Branch/Staff</th><th>Revenue ($)</th><th>Recharge ($)</th><th>Gross Ads</th><th>Home Internet (Units)</th></tr></thead><tbody id="leaderboardBody"></tbody></table></div></div>
</div>

<div id="daily-sales-page" class="hidden">
<div class="chart-card"><div class="chart-card-header"><div class="chart-card-title"><i class="fas fa-chart-line"></i><h3 id="salesPerformanceTitle">Sales Performance Growth</h3></div>
<div style="display:flex;gap:10px" id="performanceFilters">
<select id="performancePeriod" class="report-filter-input" onchange="updatePerformanceChart()"><option value="1">Last 1 Month</option><option value="3" selected>Last 3 Months</option><option value="6">Last 6 Months</option><option value="12">Last 12 Months</option></select>
<select id="performanceBranch" class="report-filter-input" onchange="updatePerformanceChart()" style="display:none"><option value="">All Branches</option></select>
</div></div>
<div class="chart-container-dashboard" style="height:400px"><canvas id="salesPerformanceChart"></canvas></div>
<div class="performance-summary">
<div class="performance-card growth"><div class="performance-icon"><i class="fas fa-arrow-up"></i></div><div class="performance-content"><div class="performance-label">Growth Rate</div><div class="performance-value" id="growthRate">0%</div></div></div>
<div class="performance-card revenue"><div class="performance-icon"><i class="fas fa-dollar-sign"></i></div><div class="performance-content"><div class="performance-label">Current Month Revenue</div><div class="performance-value" id="currentMonthRevenue">$0.00</div></div></div>
<div class="performance-card compare"><div class="performance-icon"><i class="fas fa-chart-bar"></i></div><div class="performance-content"><div class="performance-label">Previous Month Revenue</div><div class="performance-value" id="previousMonthRevenue">$0.00</div></div></div>
<div class="performance-card trend"><div class="performance-icon"><i class="fas fa-trending-up"></i></div><div class="performance-content"><div class="performance-label">Avg Monthly Growth</div><div class="performance-value" id="avgGrowth">0%</div></div></div>
</div></div>
<div class="form-card"><div class="form-header"><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-cash-register"></i><h2>ការលក់ប្រចាំថ្ងៃ</h2></div>
<button class="add-customer-btn" onclick="openSalesModal()"><i class="fas fa-plus-circle"></i> បញ្ចូលទិន្ន័យការលក់</button></div>
<div class="info-message"><i class="fas fa-info-circle"></i><p>ចុចប៊ូតុង "បញ្ចូលទិន្ន័យការលក់" ដើម្បីបន្ថែមទិន្នន័យថ្មី</p></div>
<div class="table-card"><div class="table-header"><i class="fas fa-history"></i><h2>ប្រវត្តិការលក់</h2></div>
<div class="data-table"><table><thead><tr><th>ថ្ងៃខែ</th><th>ឈ្មោះបុគ្គលិក</th><th>សាខា</th><th>A/S/H/F</th><th>R/S/D ($)</th><th>សរុប ($)</th><th>Action</th></tr></thead><tbody id="tableBody"></tbody></table></div></div></div>
</div>

<div id="deposit-page" class="hidden">
<div class="form-card"><div class="form-header"><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-coins"></i><h2>ការដាក់ប្រាក់</h2></div>
<button class="add-customer-btn" onclick="openDepositModal()"><i class="fas fa-plus-circle"></i> បញ្ជូលការដាក់ប្រាក់</button></div>
<div class="info-message"><i class="fas fa-info-circle"></i><p>ចុចប៊ូតុង "បញ្ជូលការដាក់ប្រាក់" ដើម្បីបន្ថែមទិន្នន័យថ្មី</p></div>
<div class="table-card"><div class="table-header"><i class="fas fa-history"></i><h2>ប្រវត្តិការដាក់ប្រាក់</h2></div>
<div class="data-table"><table><thead><tr><th>ថ្ងៃខែ</th><th>ឈ្មោះបុគ្គលិក</th><th>សាខា</th><th>Cash</th><th>Credit</th><th>ចំណាំ</th><th>សកម្មភាព</th></tr></thead><tbody id="depositTableBody"></tbody></table></div></div></div>
</div>

<div id="reports-page" class="hidden">
<div class="form-card"><div class="form-header"><i class="fas fa-chart-line"></i><h2>របាយការណ៍ការលក់ពេញលេញ</h2></div>
<div class="table-card"><div class="data-table"><table id="reportTable"><thead><tr><th>ថ្ងៃខែ</th><th>បុគ្គលិក</th><th>សាខា</th><th>Gross Ads</th><th>Change SIM</th><th>S@Home</th><th>Fiber+</th><th>Recharge ($)</th><th>SC-Shop ($)</th><th>SC-Dealer ($)</th><th>Total Revenue ($)</th></tr></thead><tbody id="reportTableBody"></tbody></table></div></div></div>
</div>

<div id="customers-page" class="hidden">
<div class="table-card"><div class="table-header"><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-users"></i><h2>អតិថិជន</h2></div>
<button class="add-customer-btn" onclick="openCustomerModal()"><i class="fas fa-user-plus"></i> បន្ថែមអតិថិជន</button></div>
<div class="data-table"><table><thead><tr><th>ថ្ងៃខែ</th><th>បុគ្គលិក</th><th>សាខា</th><th>ឈ្មោះអតិថិជន</th><th>លេខទូរសព្ទ</th><th>ផលិតផល</th><th>Status</th><th>Remark</th><th>Action</th></tr></thead><tbody id="customersTableBody"></tbody></table></div></div>
<div class="table-card"><div class="table-header"><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-mobile-alt"></i><h2>Top Up</h2></div>
<button class="topup-btn" onclick="openTopUpModal()"><i class="fas fa-plus-circle"></i> បន្ថែម Top Up</button></div>
<div class="data-table"><table><thead><tr><th>ថ្ងៃខែ</th><th>បុគ្គលិក</th><th>សាខា</th><th>ឈ្មោះអតិថិជន</th><th>លេខទូរសព្ទ</th><th>លេខទាក់ទង</th><th>ផលិតផល</th><th>ថ្ងៃផុតកំណត់</th><th>Remark</th><th>Action</th></tr></thead><tbody id="topupTableBody"></tbody></table></div></div>
</div>

<div id="promotions-page" class="hidden">
<div class="form-card"><div class="form-header"><i class="fas fa-gift"></i><h2>ប្រូម៉ូសិនថ្មី</h2></div>
<div style="margin-bottom:20px"><button class="add-customer-btn" onclick="openPromotionModal()"><i class="fas fa-plus"></i> បន្ថែមប្រូម៉ូសិន</button></div>
<div id="promotionsGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px"></div></div>
</div>

<div id="settings-page" class="hidden">
<div class="form-card" id="settingsAdminOnly"><div class="form-header"><i class="fas fa-users-cog"></i><h2>គ្រប់គ្រងអ្នកប្រើប្រាស់</h2></div>
<div class="table-card"><div class="table-header"><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-users"></i><h2>បញ្ជីអ្នកប្រើប្រាស់</h2></div>
<button class="add-user-btn" onclick="openUserModal()"><i class="fas fa-user-plus"></i> បន្ថែមអ្នកប្រើប្រាស់</button></div>
<div class="data-table"><table><thead><tr><th>Username</th><th>Full Name</th><th>Role</th><th>Branch</th><th>Status</th><th>Created Date</th><th>Action</th></tr></thead><tbody id="usersTableBody"></tbody></table></div></div></div>
</div>

</div></div>
</div>

<div id="salesModal" class="modal"><div class="modal-content modal-sales"><div class="modal-header"><h3><i class="fas fa-plus-circle"></i> <span id="salesModalTitle">បញ្ចូលទិន្ន័យការលក់</span></h3><span class="close" onclick="closeSalesModal()">&times;</span></div>
<div class="modal-body"><form id="salesFormModal"><input type="hidden" id="edit_sales_index">
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-calendar-alt"></i> ថ្ងៃខែ</label><input type="date" id="modal_date" required></div>
<div class="modal-form-group"><label><i class="fas fa-user"></i> ឈ្មោះបុគ្គលិក</label><input type="text" id="modal_staff_name" required></div></div>
<div class="modal-form-row-1"><div class="modal-form-group"><label><i class="fas fa-building"></i> សាខា</label><input type="text" id="modal_branch_name" readonly></div></div>
<div class="modal-section-title"><h3><i class="fas fa-sort-amount-up"></i> ចំនួន</h3></div>
<div class="modal-form-row-4">
<div class="modal-form-group"><label><i class="fas fa-mobile-alt"></i> Gross-Ads</label><input type="number" id="modal_gross_ads" value="0" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-sim-card"></i> Change-SIM</label><input type="number" id="modal_change_sim" value="0" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-home"></i> S@Home</label><input type="number" id="modal_s_at_home" value="0" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-wifi"></i> Fiber+</label><input type="number" id="modal_fiber_plus" value="0" min="0" required></div>
</div>
<div class="modal-section-title"><h3><i class="fas fa-dollar-sign"></i> ទឹកប្រាក់ $</h3></div>
<div class="modal-form-row-4">
<div class="modal-form-group"><label><i class="fas fa-money-bill-wave"></i> Recharge</label><input type="number" id="modal_recharge" value="0.00" step="0.01" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-shopping-cart"></i> SC-Shop</label><input type="number" id="modal_sc_shop" value="0.00" step="0.01" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-store"></i> SC-Dealer</label><input type="number" id="modal_sc_dealer" value="0.00" step="0.01" min="0" required></div>
<div class="modal-form-group modal-highlight"><label><i class="fas fa-chart-line"></i> Total Revenue</label><input type="number" id="modal_total_revenue" value="0.00" step="0.01" min="0" required></div>
</div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closeSalesModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div id="depositModal" class="modal"><div class="modal-content modal-deposit"><div class="modal-header modal-header-deposit"><h3><i class="fas fa-coins"></i> <span id="depositModalTitle">បញ្ជូលការដាក់ប្រាក់</span></h3><span class="close" onclick="closeDepositModal()">&times;</span></div>
<div class="modal-body"><form id="depositFormModal"><input type="hidden" id="edit_deposit_index">
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-calendar-alt"></i> ថ្ងៃខែ</label><input type="date" id="modal_deposit_date" required></div>
<div class="modal-form-group"><label><i class="fas fa-user"></i> ឈ្មោះបុគ្គលិក</label><input type="text" id="modal_deposit_staff"></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-money-bill"></i> Cash ($)</label><input type="number" id="modal_cash" value="0.00" step="0.01" min="0" required></div>
<div class="modal-form-group"><label><i class="fas fa-credit-card"></i> Credit ($)</label><input type="number" id="modal_credit" value="0.00" step="0.01" min="0" required></div></div>
<div class="modal-form-row-1"><div class="modal-form-group"><label><i class="fas fa-sticky-note"></i> កំណត់ចំណាំ</label><textarea id="modal_note"></textarea></div></div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closeDepositModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div id="userModal" class="modal"><div class="modal-content modal-user"><div class="modal-header"><h3><i class="fas fa-user-plus"></i> <span id="userModalTitle">បន្ថែមអ្នកប្រើប្រាស់ថ្មី</span></h3><span class="close" onclick="closeUserModal()">&times;</span></div>
<div class="modal-body"><form id="userForm"><input type="hidden" id="edit_user_index">
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-user"></i> Username</label><input type="text" id="user_username" required></div>
<div class="modal-form-group"><label><i class="fas fa-id-card"></i> Full Name</label><input type="text" id="user_fullname" required></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-lock"></i> Password</label><input type="password" id="user_password" required></div>
<div class="modal-form-group"><label><i class="fas fa-user-tag"></i> Role</label><select id="user_role" required><option value="">Select Role</option><option value="admin">Admin</option><option value="supervisor">Supervisor</option><option value="agent">Agent</option></select></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-building"></i> Branch</label><input type="text" id="user_branch" required></div>
<div class="modal-form-group"><label><i class="fas fa-toggle-on"></i> Status</label><select id="user_status" required><option value="active">Active</option><option value="inactive">Inactive</option></select></div></div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closeUserModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div id="customerModal" class="modal"><div class="modal-content modal-customer"><div class="modal-header"><h3><i class="fas fa-user-plus"></i> <span id="customerModalTitle">បន្ថែមអតិថិជនថ្មី</span></h3><span class="close" onclick="closeCustomerModal()">&times;</span></div>
<div class="modal-body"><form id="customerForm"><input type="hidden" id="edit_customer_index">
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-calendar-alt"></i> ថ្ងៃខែឆ្នាំ</label><input type="date" id="cust_date" required></div>
<div class="modal-form-group"><label><i class="fas fa-user-tie"></i> បុគ្គលិក</label><input type="text" id="cust_staff"></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-user"></i> ឈ្មោះអតិថិជន</label><input type="text" id="cust_name" required></div>
<div class="modal-form-group"><label><i class="fas fa-phone"></i> លេខទូរសព្ទ</label><input type="tel" id="cust_phone" required></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-box"></i> ផលិតផល</label><select id="cust_product" required><option value="">ជ្រើសរើសផលិតផល</option><option value="Smart@Home">Smart@Home</option><option value="Smart Fiber+">Smart Fiber+</option><option value="M2M">M2M</option><option value="Smart Laor 6">Smart Laor 6</option><option value="Smart Laor 10">Smart Laor 10</option></select></div>
<div class="modal-form-group"><label><i class="fas fa-flag"></i> Status</label><select id="cust_status" required><option value="">ជ្រើសរើស Status</option><option value="New Lead">New Lead</option><option value="Prospect">Prospect</option><option value="Hot Prospect">Hot Prospect</option><option value="Closed">Closed</option></select></div></div>
<div class="modal-form-row-1"><div class="modal-form-group"><label><i class="fas fa-comment"></i> Remark</label><textarea id="cust_remark"></textarea></div></div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closeCustomerModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div id="topupModal" class="modal"><div class="modal-content modal-topup"><div class="modal-header modal-header-topup"><h3><i class="fas fa-mobile-alt"></i> <span id="topupModalTitle">បន្ថែម Top Up</span></h3><span class="close" onclick="closeTopUpModal()">&times;</span></div>
<div class="modal-body"><form id="topupForm"><input type="hidden" id="edit_topup_index">
<div class="modal-form-row-3"><div class="modal-form-group"><label><i class="fas fa-calendar-alt"></i> ថ្ងៃខែ</label><input type="date" id="topup_date" required></div>
<div class="modal-form-group"><label><i class="fas fa-user-tie"></i> បុគ្���លិក</label><input type="text" id="topup_staff"></div>
<div class="modal-form-group"><label><i class="fas fa-user"></i> ឈ្មោះអតិថិជន</label><input type="text" id="topup_customer" required></div></div>
<div class="modal-form-row-3"><div class="modal-form-group"><label><i class="fas fa-phone"></i> លេខទូរសព្ទ</label><input type="tel" id="topup_phone" required></div>
<div class="modal-form-group"><label><i class="fas fa-phone-alt"></i> លេខទាក់ទង</label><input type="tel" id="topup_contact"></div>
<div class="modal-form-group"><label><i class="fas fa-box"></i> ផលិតផល</label><select id="topup_product" required><option value="">ជ្រើសរើសផលិតផល</option><option value="Smart@Home">Smart@Home</option><option value="Smart Fiber+">Smart Fiber+</option><option value="M2M">M2M</option><option value="Smart Laor 6">Smart Laor 6</option><option value="Smart Laor 10">Smart Laor 10</option></select></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-calendar-times"></i> ថ្ងៃផុតកំណត់</label><input type="date" id="topup_expiry" required></div>
<div class="modal-form-group"><label><i class="fas fa-comment"></i> Remark</label><textarea id="topup_remark"></textarea></div></div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closeTopUpModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div id="promotionModal" class="modal"><div class="modal-content modal-promotion"><div class="modal-header"><h3><i class="fas fa-gift"></i> <span id="promotionModalTitle">បន្ថែមប្រូម៉ូសិន</span></h3><span class="close" onclick="closePromotionModal()">&times;</span></div>
<div class="modal-body"><form id="promotionForm"><input type="hidden" id="edit_promotion_index">
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-tv"></i> Channel</label><input type="text" id="promo_channel" required></div>
<div class="modal-form-group"><label><i class="fas fa-bullhorn"></i> Campaign</label><input type="text" id="promo_campaign" required></div></div>
<div class="modal-form-row-2"><div class="modal-form-group"><label><i class="fas fa-calendar-alt"></i> ថ្ងៃចាប់ផ្ដើម</label><input type="date" id="promo_start_date" required></div>
<div class="modal-form-group"><label><i class="fas fa-calendar-times"></i> ថ្ងៃបញ្ចប់</label><input type="date" id="promo_end_date" required></div></div>
<div class="modal-form-row-1"><div class="modal-form-group"><label><i class="fas fa-file-alt"></i> លក្ខខណ្ឌ</label><textarea id="promo_terms" required style="min-height:120px"></textarea></div></div>
<div class="modal-form-buttons"><button type="button" class="modal-cancel-btn" onclick="closePromotionModal()"><i class="fas fa-times"></i> បិទ</button>
<button type="submit" class="modal-submit-btn"><i class="fas fa-save"></i> រក្សាទុក</button></div>
</form></div></div></div>

<div class="sync-buttons" id="syncButtons" style="display:none">
<button class="sync-btn sync-btn-upload" onclick="syncToGoogleSheets()"><i class="fas fa-cloud-upload-alt"></i><span>Sync Up</span></button>
<button class="sync-btn sync-btn-download" onclick="loadFromGoogleSheets()"><i class="fas fa-cloud-download-alt"></i><span>Sync Down</span></button>
<div class="sync-info"><i class="fas fa-clock"></i><span id="lastSyncDisplay">មិនទាន់ Sync</span></div>
</div>

<script src="app.js"></script>
</body>
</html>
